/*! @silexlabs/grapesjs-fonts - 1.2.1 */
!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports["@silexlabs/grapesjs-fonts"]=e():t["@silexlabs/grapesjs-fonts"]=e()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var t={d:(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})}},e={};t.r(e),t.d(e,{cmdGetCss:()=>jt,cmdGetHtml:()=>wt,cmdOpenFonts:()=>ot,default:()=>St,fontsDialogPlugin:()=>pt,getHtml:()=>bt,refresh:()=>xt});const s=globalThis,n=s.trustedTypes,o=n?n.createPolicy("lit-html",{createHTML:t=>t}):void 0,i="$lit$",r=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+r,a=`<${l}>`,c=document,d=()=>c.createComment(""),h=t=>null===t||"object"!=typeof t&&"function"!=typeof t,g=Array.isArray,p=t=>g(t)||"function"==typeof t?.[Symbol.iterator],f="[ \t\n\f\r]",u=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,$=/-->/g,v=/>/g,m=RegExp(`>|${f}(?:([^\\s"'>=/]+)(${f}*=${f}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),y=/'/g,A=/"/g,_=/^(?:script|style|textarea|title)$/i,x=t=>(e,...s)=>({_$litType$:t,strings:e,values:s}),b=x(1),j=(x(2),x(3),Symbol.for("lit-noChange")),w=Symbol.for("lit-nothing"),N=new WeakMap,C=c.createTreeWalker(c,129);function S(t,e){if(!g(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==o?o.createHTML(e):e}const I=(t,e)=>{const s=t.length-1,n=[];let o,l=2===e?"<svg>":3===e?"<math>":"",c=u;for(let e=0;e<s;e++){const s=t[e];let d,h,g=-1,p=0;for(;p<s.length&&(c.lastIndex=p,h=c.exec(s),null!==h);)p=c.lastIndex,c===u?"!--"===h[1]?c=$:void 0!==h[1]?c=v:void 0!==h[2]?(_.test(h[2])&&(o=RegExp("</"+h[2],"g")),c=m):void 0!==h[3]&&(c=m):c===m?">"===h[0]?(c=o??u,g=-1):void 0===h[1]?g=-2:(g=c.lastIndex-h[2].length,d=h[1],c=void 0===h[3]?m:'"'===h[3]?A:y):c===A||c===y?c=m:c===$||c===v?c=u:(c=m,o=void 0);const f=c===m&&t[e+1].startsWith("/>")?" ":"";l+=c===u?s+a:g>=0?(n.push(d),s.slice(0,g)+i+s.slice(g)+r+f):s+r+(-2===g?e:f)}return[S(t,l+(t[s]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),n]};class M{constructor({strings:t,_$litType$:e},s){let o;this.parts=[];let a=0,c=0;const h=t.length-1,g=this.parts,[p,f]=I(t,e);if(this.el=M.createElement(p,s),C.currentNode=this.el.content,2===e||3===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(o=C.nextNode())&&g.length<h;){if(1===o.nodeType){if(o.hasAttributes())for(const t of o.getAttributeNames())if(t.endsWith(i)){const e=f[c++],s=o.getAttribute(t).split(r),n=/([.?@])?(.*)/.exec(e);g.push({type:1,index:a,name:n[2],strings:s,ctor:"."===n[1]?O:"?"===n[1]?E:"@"===n[1]?G:P}),o.removeAttribute(t)}else t.startsWith(r)&&(g.push({type:6,index:a}),o.removeAttribute(t));if(_.test(o.tagName)){const t=o.textContent.split(r),e=t.length-1;if(e>0){o.textContent=n?n.emptyScript:"";for(let s=0;s<e;s++)o.append(t[s],d()),C.nextNode(),g.push({type:2,index:++a});o.append(t[e],d())}}}else if(8===o.nodeType)if(o.data===l)g.push({type:2,index:a});else{let t=-1;for(;-1!==(t=o.data.indexOf(r,t+1));)g.push({type:7,index:a}),t+=r.length-1}a++}}static createElement(t,e){const s=c.createElement("template");return s.innerHTML=t,s}}function T(t,e,s=t,n){if(e===j)return e;let o=void 0!==n?s._$Co?.[n]:s._$Cl;const i=h(e)?void 0:e._$litDirective$;return o?.constructor!==i&&(o?._$AO?.(!1),void 0===i?o=void 0:(o=new i(t),o._$AT(t,s,n)),void 0!==n?(s._$Co??=[])[n]=o:s._$Cl=o),void 0!==o&&(e=T(t,o._$AS(t,e.values),o,n)),e}class H{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:s}=this._$AD,n=(t?.creationScope??c).importNode(e,!0);C.currentNode=n;let o=C.nextNode(),i=0,r=0,l=s[0];for(;void 0!==l;){if(i===l.index){let e;2===l.type?e=new k(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new V(o,this,t)),this._$AV.push(e),l=s[++r]}i!==l?.index&&(o=C.nextNode(),i++)}return C.currentNode=c,n}p(t){let e=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,e),e+=s.strings.length-2):s._$AI(t[e])),e++}}class k{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,s,n){this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=s,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=T(this,t,e),h(t)?t===w||null==t||""===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==j&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):p(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==w&&h(this._$AH)?this._$AA.nextSibling.data=t:this.T(c.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=M.createElement(S(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===n)this._$AH.p(e);else{const t=new H(n,this),s=t.u(this.options);t.p(e),this.T(s),this._$AH=t}}_$AC(t){let e=N.get(t.strings);return void 0===e&&N.set(t.strings,e=new M(t)),e}k(t){g(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let s,n=0;for(const o of t)n===e.length?e.push(s=new k(this.O(d()),this.O(d()),this,this.options)):s=e[n],s._$AI(o),n++;n<e.length&&(this._$AR(s&&s._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class P{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,s,n,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=o,s.length>2||""!==s[0]||""!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}_$AI(t,e=this,s,n){const o=this.strings;let i=!1;if(void 0===o)t=T(this,t,e,0),i=!h(t)||t!==this._$AH&&t!==j,i&&(this._$AH=t);else{const n=t;let r,l;for(t=o[0],r=0;r<o.length-1;r++)l=T(this,n[s+r],e,r),l===j&&(l=this._$AH[r]),i||=!h(l)||l!==this._$AH[r],l===w?t=w:t!==w&&(t+=(l??"")+o[r+1]),this._$AH[r]=l}i&&!n&&this.j(t)}j(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class O extends P{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===w?void 0:t}}class E extends P{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==w)}}class G extends P{constructor(t,e,s,n,o){super(t,e,s,n,o),this.type=5}_$AI(t,e=this){if((t=T(this,t,e,0)??w)===j)return;const s=this._$AH,n=t===w&&s!==w||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==w&&(s===w||n);n&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class V{constructor(t,e,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){T(this,t)}}const R={M:i,P:r,A:l,C:1,L:I,R:H,D:p,V:T,I:k,H:P,N:E,U:G,B:O,F:V},U=s.litHtmlPolyfillSupport;U?.(M,k),(s.litHtmlVersions??=[]).push("3.3.0");function*B(t,e){if(void 0!==t){let s=0;for(const n of t)yield e(n,s++)}}const{I:F}=R,z=2;class D{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,s){this._$Ct=t,this._$AM=e,this._$Ci=s}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}const L=(t,e)=>{const s=t._$AN;if(void 0===s)return!1;for(const t of s)t._$AO?.(e,!1),L(t,e);return!0},W=t=>{let e,s;do{if(void 0===(e=t._$AM))break;s=e._$AN,s.delete(t),t=e}while(0===s?.size)},J=t=>{for(let e;e=t._$AM;t=e){let s=e._$AN;if(void 0===s)e._$AN=s=new Set;else if(s.has(t))break;s.add(t),K(e)}};function Y(t){void 0!==this._$AN?(W(this),this._$AM=t,J(this)):this._$AM=t}function q(t,e=!1,s=0){const n=this._$AH,o=this._$AN;if(void 0!==o&&0!==o.size)if(e)if(Array.isArray(n))for(let t=s;t<n.length;t++)L(n[t],!1),W(n[t]);else null!=n&&(L(n,!1),W(n));else L(this,t)}const K=t=>{t.type==z&&(t._$AP??=q,t._$AQ??=Y)};class Z extends D{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,s){super._$AT(t,e,s),J(this),this.isConnected=t._$AU}_$AO(t,e=!0){t!==this.isConnected&&(this.isConnected=t,t?this.reconnected?.():this.disconnected?.()),e&&(L(this,t),W(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}class Q{}const X=new WeakMap,tt=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends Z{render(t){return w}update(t,[e]){const s=e!==this.G;return s&&void 0!==this.G&&this.rt(void 0),(s||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),w}rt(t){if(this.isConnected||(t=void 0),"function"==typeof this.G){const e=this.ht??globalThis;let s=X.get(e);void 0===s&&(s=new WeakMap,X.set(e,s)),void 0!==s.get(this.G)&&this.G.call(this.ht,void 0),s.set(this.G,t),void 0!==t&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return"function"==typeof this.G?X.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),et=document.createElement('div'),st=document.createElement('style');let nt;st.textContent=`\n  .gfonts-section { padding: 8px 0 }\n  .gfonts-list { list-style: none; padding: 0; margin: 0 }\n  .gfonts-item { padding: 10px 12px; border: 1px solid var(--gjs-light-border); border-radius: 8px; margin-bottom: 10px; background: transparent; color: var(--gjs-font-color) }\n  .gfonts-item strong { display: block; font-size: 14px; margin-bottom: 4px; color: var(--gjs-font-color-active) }\n  .gfonts-item p { margin: 0 0 8px 0; color: var(--gjs-font-color); font-size: 12px }\n  .variants-toolbar { display: flex; align-items: center; gap: 8px; margin: 6px 0 }\n  .variants-grid { display: flex; flex-wrap: wrap; gap: 6px }\n  .variants-grid label { background: var(--gjs-soft-light-color); border-radius: 4px; padding: 4px 6px; cursor: pointer; border: 1px solid transparent; color: var(--gjs-font-color) }\n  .variants-grid input { margin: 0 }\n  .gfonts-preview { padding: 6px; border: 1px solid var(--gjs-light-border); border-radius: 8px; background: var(--gjs-soft-light-color); margin: 6px 0 8px }\n  .preview-iframe { width: 100%; border: 0; height: 56px; background: transparent }\n  .silex-bar, .pagination-controls { display: flex; gap: 8px; align-items: center }\n  .silex-list { list-style: none; margin: 0; padding: 0 }\n  .silex-list > li { list-style: none }\n  fieldset.silex-group--simple { border: 0; padding: 0; margin: 0 }\n  fieldset.silex-group--simple legend { margin: 0; color: var(--gjs-font-color); font-size: 12px }\n  .gfonts-toolbar { display: flex; gap: 8px; align-items: center; flex-wrap: wrap }\n  .gfonts-toolbar select, .gfonts-toolbar input { background: var(--gjs-main-light-color); color: var(--gjs-font-color); border: 1px solid var(--gjs-light-border); border-radius: 4px; padding: 4px 6px }\n  .gfonts-toolbar .silex-button { background: var(--gjs-main-light-color); color: var(--gjs-font-color); border: 1px solid var(--gjs-light-border) }\n  .gfonts-pager { margin-left: auto; display: inline-flex; gap: 6px; align-items: center; color: var(--gjs-font-color) }\n  .gfonts-pager .page { opacity: .8 }\n  .gfonts-actions { display: flex; gap: 8px; margin-top: 6px }\n  .gfonts-btn--ghost { background: transparent; border: 1px solid var(--gjs-light-border); color: var(--gjs-font-color); padding: 2px 6px; font-size: 11px }\n  .gfonts-btn--danger { background: transparent; border: 1px solid var(--gjs-color-red); color: var(--gjs-color-red) }\n`,document.head.appendChild(st);const ot='open-fonts',it='silex-loaded-fonts-list';let rt,lt=[],at=[],ct='https://fonts.googleapis.com',dt='https://www.googleapis.com';try{rt=JSON.parse(localStorage.getItem(it))}catch(i){console.error('Could not get fonts from local storage:',i)}function ht(t,e){t.getModel().set('fonts',lt),yt(t,lt),At(t,lt,e)}async function gt(t){return rt=rt??(await(await fetch(t)).json())?.items,localStorage.setItem(it,JSON.stringify(rt)),await async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((e=>setTimeout((()=>e()),t)))}(),rt}const pt=(t,e)=>{if(at=t.StyleManager.getBuiltIn('font-family').options||[],e.server_url&&(ct=e.server_url),e.api_url&&(dt=e.api_url),!e.api_key)throw new Error(t.I18n.t('grapesjs-fonts.You must provide Google font api key'));let s;t.Commands.add(ot,{run:()=>(nt=t.Modal.open({title:t.I18n.t('grapesjs-fonts.Fonts'),content:'',attributes:{class:'fonts-dialog'}}).onceClose((()=>{t.stopCommand(ot)})),nt.setContent(et),async function(t){lt=structuredClone(t.getModel().get('fonts')||[]).map((t=>({...t,variants:t.variants||[]})))}(t),vt(t,e),gt(`${dt}/webfonts/v1/webfonts?key=${e.api_key}`).then((s=>{vt(t,e,s)})),nt),stop:()=>{nt.close()}}),t.on('storage:start:store',(e=>{e.fonts=t.getModel().get('fonts')}));const n=()=>{clearTimeout(s),s=setTimeout((()=>xt(t,e)),50)};t.on('storage:end:load',(e=>{const s=e.fonts||[];t.getModel().set('fonts',s),n()})),t.on('canvas:frame:load',(()=>{n()})),t.on('page',(()=>{n()}))},ft=new Q;let ut=0,$t='';function vt(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=ft.value,o=10;let i=JSON.parse(JSON.stringify(s));const r=i.filter((t=>{const e=function(t,e){return t.toLowerCase().includes(e.toLowerCase())}(t.family,n?.value||''),s=!$t||t.category===$t;return e&&s}));let l=Math.ceil(r.length/o);const a=Array.from(new Set((s||[]).map((t=>t.category)).filter(Boolean))).sort();ut>=l&&(ut=Math.max(0,l-1));const c=r.slice(ut*o,(ut+1)*o);((t,e,s)=>{const n=s?.renderBefore??e;let o=n._$litPart$;if(void 0===o){const t=s?.renderBefore??null;n._$litPart$=o=new k(e.insertBefore(d(),t),t,void 0,s??{})}o._$AI(t)})(b`
    <div>
      <div class="silex-form__element">
        <h2>${t.I18n.t('grapesjs-fonts.Installed fonts')}</h2>
        <ul class="silex-list">
          ${lt&&lt.length?B(lt,(n=>b`
            <li class="gfonts-item">
              <strong>${n.family||'Unknown Font'}</strong>
              <p>${n.category||(rt||[]).find((t=>t.family===n.family))?.category||'No category'} - ${n.variants?.length||0} variants</p>

              <div class="gfonts-preview">
                ${mt(n)}
              </div>
              <fieldset class="silex-group--simple full-width">
                <div class="variants-toolbar">
                  <legend>${t.I18n.t('grapesjs-fonts.Variants')||'Variants'}</legend>
                  <button class="silex-button gfonts-btn--ghost" type="button" @click=${()=>{const o=(rt||[]).find((t=>t.family===n.family))?.variants||[],i=Array.isArray(n.variants)&&o.length&&o.every((t=>n.variants.includes(t)));n.variants=i?[]:[...o],ht(t,e),vt(t,e,s)}}>${t.I18n.t('grapesjs-fonts.Toggle all')||'Toggle all'}</button>
                </div>
                <div class="variants-grid">
                  ${B((rt||[]).find((t=>t.family===n.family))?.variants||[],(o=>b`
                    <label>
                      <input
                        type="checkbox"
                        .checked=${(n.variants||[]).includes(o)}
                        @change=${i=>{const r=i.target.checked;n.variants=Array.isArray(n.variants)?n.variants:[];const l=n.variants.includes(o);r&&!l&&(n.variants=[...n.variants,o]),!r&&l&&(n.variants=n.variants.filter((t=>t!==o))),ht(t,e),vt(t,e,s)}}
                      />
                      ${o}
                    </label>
                  `))}
                </div>
              </fieldset>
              <div class="gfonts-actions">
                <button class="silex-button gfonts-btn--danger" type="button" @click=${()=>{lt=lt.filter((t=>t.family!==n.family)),ht(t,e),vt(t,e,s)}}>${t.I18n.t('grapesjs-fonts.Remove')}</button>
              </div>

            </li>
          `)):b`<li class="gfonts-item" style="border-style:dashed; text-align:center; font-style:italic; color: var(--gjs-secondary-light-color)">${t.I18n.t('grapesjs-fonts.No installed fonts')||'No installed fonts yet'}</li>`}
        </ul>

      </div>
      <div>
        <h2>${t.I18n.t('grapesjs-fonts.All fonts')||'All fonts'}</h2>
        <div class="silex-bar gfonts-toolbar">
          <select @change=${n=>{$t=n.target.value||'',ut=0,vt(t,e,s)}}>
            <option value="">All categories</option>
            ${a.map((t=>b`<option value=${t} ?selected=${$t===t}>${t}</option>`))}
          </select>
          <input
            type="text"
            ${tt(ft)}
            @input=${()=>{ut=0,vt(t,e,s)}}
            placeholder="${t.I18n.t('grapesjs-fonts.Search')}"
          />
          <div class="gfonts-pager">
            <button class="silex-button" ?disabled=${0===ut} @click=${()=>{ut>0&&(ut--,vt(t,e,s))}}>${t.I18n.t('grapesjs-fonts.Previous Page')}</button>
            <span class="page">Page ${ut+1} / ${l}</span>
            <button class="silex-button" ?disabled=${ut===l-1} @click=${()=>{ut<l-1&&(ut++,vt(t,e,s))}}>${t.I18n.t('grapesjs-fonts.Next Page')}</button>
          </div>
        </div>
        <ul class="silex-list">
          ${B(c,(s=>b`
            <li class="gfonts-item">
              <strong>${s.family}</strong>
              <p>${s.category} - ${s.variants.length} variants</p>

              <div class="gfonts-preview">
                ${mt(s)}
              </div>
              <button class="silex-button" @click=${()=>function(t,e,s,n){const o=lt.find((t=>t.family===s.family));o||lt.push({family:s.family,name:s.family,category:s.category,variants:s.variants,value:`"${s.family}", ${s.category}`});ht(t,e),vt(t,e,n)}(t,e,s,i)}>${t.I18n.t('grapesjs-fonts.Add font')}</button>
            </li>
          `))}
        </ul>
      </div>
    </div>
    `,et)}function mt(t){const e=t.family||t.name||'',s=e.replace(/ /g,'+'),n=(getComputedStyle(document.documentElement).getPropertyValue('--gjs-font-color')||'').trim()||getComputedStyle(et).color||'#ddd',o=(rt||[]).find((t=>t.family===e)),i=Array.isArray(t.variants)&&t.variants.length?t.variants:o?.variants||['regular'],r=[];i.forEach((t=>{const e=/italic/i.test(t)?1:0,s=String(t).match(/\d+/),n=`${e},${s?parseInt(s[0],10):400}`;r.includes(n)||r.push(n)}));const l=r.length?`:ital,wght@${r.join(';')}`:'',a=r.map((t=>{const[s,n]=t.split(',');return`<p style="margin:0; line-height:1.5; font-style:${'1'===s?'italic':'normal'}; font-weight:${n}">${e} — Sphinx of black quartz, judge my vow. 0123456789</p>`})).join('');return b`
    <iframe
      class="preview-iframe"
      srcdoc="<html><head><link href='https://fonts.googleapis.com/css2?family=${s}${l}&display=swap' rel='stylesheet'><style>body { margin: 0; color: ${n}; font-family: '${e}', sans-serif }</style></head><body>${a}</body></html>"></iframe>
    `}function yt(t,e){const s=t.Canvas.getDocument();if(!s)return;!function(t,e){const s=t.head.querySelectorAll(`[${e}]`);Array.from(s).forEach((t=>t.remove()))}(s,_t);const n=bt(e,_t);s.head.insertAdjacentHTML('beforeend',n)}function At(t,e,s){const n=t.StyleManager.getProperty('typography','font-family');if(!n)return;let o=e;s&&s.preserveDefaultFonts?o=at.concat(e||[]):e&&0!==e.length||(o=at),n.setOptions(o)}const _t='data-silex-gstatic';function xt(t,e){const s=t.getModel().get('fonts')||[];yt(t,s),At(t,s,e)}function bt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'';const s=t.length?`<link href="${ct}" rel="preconnect" ${e}><link href="${ct}/css2" rel="preconnect" crossorigin ${e}>`:'',n=t.map((t=>`<link href="${ct}/css2?family=${t.name.replace(/ /g,'+')}&display=swap" rel="stylesheet" ${e}>`)).join('');return s+n}const jt='get-fonts-css',wt='get-fonts-html';const Nt={'grapesjs-fonts':{Fonts:'Fonts','You must provide Google font api key':'You must provide Google font api key, see https://developers.google.com/fonts/docs/developer_api#APIKey',Search:'Search fonts...','Add font':'Install font',Remove:'Remove',Save:'Save',Cancel:'Cancel','Installed fonts':'Installed fonts','All fonts':'All fonts',Variants:'Variants','Toggle all':'Toggle all','No installed fonts':'No installed fonts yet','Previous Page':'Previous','Next Page':'Next'}},Ct={'grapesjs-fonts':{Fonts:'Polices','You must provide Google font api key':'Vous devez fournir une clé API Google font, voir https://developers.google.com/fonts/docs/developer_api#APIKey',Family:'Famille',Search:'Rechercher une police','Add font':'Installer la police',Remove:'Supprimer',Save:'Enregistrer',Cancel:'Annuler','Installed fonts':'Polices installées','All fonts':'Toutes les polices',Variants:'Variantes','Toggle all':'Tout sélectionner','No installed fonts':'Aucune police installée','Previous Page':'Précédent','Next Page':'Suivant'}},St=function(t){const e={i18n:{},preserveDefaultFonts:!0,...arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}};t.I18n&&t.I18n.addMessages({en:Nt,fr:Ct,...e.i18n}),function(t){t.Commands.add(jt,(()=>{throw new Error('Not implemented')})),t.Commands.add(wt,(t=>bt(t.getModel().get('fonts')||[])))}(t),pt(t,e)};return e})()));
//# sourceMappingURL=index.js.map